ARG version="5.15.4"

FROM rmohr/activemq:${version}-alpine

USER root
RUN apk --no-cache add procps

USER activemq
ARG userid="1000"
ARG groupid="1000"
ARG dockergid="999"

# In the *container*
#   Note that a matching group is added automatically

#RUN addgroup -g ${groupid} activemq && \
#    adduser activemq -u ${userid} -G activemq \
#    -g -D -S
#
#RUN delgroup ping && \
#    addgroup -g ${dockergid} docker && \
#    addgroup activemq docker && \
#    addgroup -g 666 ping

ARG version

COPY --chown=activemq:activemq \
         activemq.xml \ 
         /opt/apache-activemq-${version}/conf/activemq.xml
